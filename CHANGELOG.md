# 📋 変更履歴

すべてのバージョンの変更点を記録します。

---

## [v4.7] - 2025-11-11 ✅ 現行版

### 🐛 バグ修正
- **クリティカル**: `generateQA()`関数の変数宣言順序を修正
  - `sourceType`を定義前に使用していた問題を解決
  - Q&A生成ボタンが反応しない問題を修正
- **parseInt()処理**: 自動判定後にのみ`parseInt()`を適用するよう最適化

### 🔄 変更
- **デフォルト値**: Q&A数のデフォルトを「指定しない（自動）」に変更
  - 初回使用時のタイムアウトリスクを軽減
  - ユーザビリティ向上

### ✅ 確認済み
- Q&A生成ボタン正常動作
- HTMLソースコードタブ切り替え正常動作
- 自動Q&A数判定正常動作

---

## [v4.6] - 2025-11-11 ⚠️ 非推奨

### ➕ 新機能
- **詳細エラーログ表示**
  - 8種類のエラータイプ自動判定
  - エラーコード + 説明 + 解決方法
  - 「エラーをコピー」ボタン追加

- **自動Q&A数判定オプション**
  - 「指定しない（自動）」オプション追加
  - リソースタイプに応じて最適な数を自動判定
    - 指定URLのみ: 50問（約45秒）
    - 外部リソースのみ: 30問（約35秒）
    - 両方: 40問（約50秒）

### 🐛 既知の問題
- **クリティカルバグ**: Q&A生成ボタンが動作しない
- **原因**: `sourceType`変数の定義順序の問題
- **対策**: v4.7で修正済み

---

## [v4.5] - 2025-11-11

### ➕ 新機能
- **ソースコード上限拡大**: 100KB → 2MB（2,000,000文字）
  - 大規模な商品ページに対応
  - 文字数カウンター追加

### 📝 ドキュメント
- タイムアウト対策ガイド追加（`TIMEOUT_FIX_v4.5.md`）
- Vercel Pro Planへのアップグレード手順

---

## [v4.4.1] - 2025-11-11

### 🔧 修正
- **Vercelビルドエラー修正**
  - `vercel.json`の関数パターンを`"api/*.js"`に変更
  - ワイルドカードで全APIファイルをカバー

- **ディレクトリ構造修正**
  - 余分な親ディレクトリを削除
  - ルート直下に正しく配置

### 📝 ドキュメント
- GitHubデプロイガイド追加（`GITHUB_DEPLOYMENT_GUIDE.md`）

---

## [v4.4] - 2025-11-11

### ➕ 新機能
- **HTMLソースコード直接入力機能**
  - タブ切り替えUI追加
  - アクセス制限のあるページに対応
  - 最大100KB（後にv4.5で2MBに拡大）

### 🎨 UI改善
- タブベースの入力モード切り替え
- 文字数カウンター表示
- 警告メッセージの改善

---

## [v4.3.1.2] - 2025-11-10

### 🐛 バグ修正
- **構文エラー修正**: `generate-qa.js` line 653の引用符エラー
- **コンソールログ修正**: エラーログ出力の正常化

---

## [v4.3.1.1] - 2025-11-10

### 🔧 修正
- Puppeteerメモリ使用量の最適化
- エラーハンドリングの改善

---

## [v4.3.1] - 2025-11-10

### 🔧 修正
- **Vercel Hobby Plan対応**
  - メモリ制限を3008MB → 2048MBに変更
  - 実行時間を120秒 → 60秒に変更

- **Puppeteer最適化**
  - メモリ使用量60〜70%削減
  - `--disable-dev-shm-usage`オプション追加
  - 不要な機能の無効化

### 📝 ドキュメント
- `VERCEL_HOBBY_NOTES.md`追加
- `HOBBY_PLAN_FIX.md`追加

---

## [v4.3] - 2025-11-10

### ➕ 新機能
- **外部リソース調査機能**
  - kutsu.com以外の参考情報も取得
  - 「外部リソースのみ」オプション追加
  - 「両方」オプション追加

### 🎨 UI改善
- リソースタイプ選択UI追加
- プログレスバーの詳細化

---

## [v4.2] - 2025-11-07

### ➕ 新機能
- **RTFダウンロード**
  - Word互換フォーマット
  - 日本語対応

### 🔧 修正
- PDFフォント問題の修正
- ダウンロードボタンの配置改善

---

## [v4.1] - 2025-11-07

### ➕ 新機能
- **PDFダウンロード**
  - A4サイズ対応
  - 日本語フォント対応

### 🎨 UI改善
- ダウンロードセクション追加
- アイコンの改善

---

## [v4.0] - 2025-11-07

### ➕ 新機能
- **初回リリース**
  - kutsu.com専用クローラー
  - OpenAI GPT-4o-mini統合
  - リアルタイム進捗表示
  - Q&A数選択（10〜100問）

### 技術スタック
- Node.js + Vercel Serverless Functions
- Puppeteer（ヘッドレスブラウザ）
- OpenAI API
- HTML/CSS/JavaScript（バニラJS）

---

## 凡例

- ➕ 新機能
- 🔧 修正
- 🐛 バグ修正
- 🎨 UI改善
- 📝 ドキュメント
- 🔄 変更
- ⚠️ 非推奨
- ✅ 推奨
